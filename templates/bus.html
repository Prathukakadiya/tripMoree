<!DOCTYPE html>
<html>
<head>
    <title>Bus Search</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<style>
    body {
        background: linear-gradient(
                    rgba(0, 0, 0, 0.65),
                    rgba(0, 0, 0, 0.65)
                ),
                url("https://images.unsplash.com/photo-1570125909232-eb263c188f7e");
        background-size: cover;
        background-position: center;
        min-height: 100vh;
        color: #ffffff;
    }

    table {
        background: #fff;
        color: #000;
    }
</style>

<body>

{% include "navbar.html" %}

<div class="container mt-5">

    <h2 class="text-center mb-4">ðŸšŒ Bus Search</h2>

    <!-- ðŸ”¥ Search Form -->
    <form method="POST" class="row g-3 mb-4">

        <div class="col-md-3">
            <input type="text" name="source"
                   class="form-control"
                   placeholder="Source City"
                   required>
        </div>

        <div class="col-md-3">
            <input type="text" name="destination"
                   class="form-control"
                   value="{{ destination }}"
                   readonly>
        </div>

        <div class="col-md-2">
            <input type="number" name="persons"
                   class="form-control"
                   value="{{ persons }}"
                   readonly>
        </div>

        <div class="col-md-2">
            <select name="ac_type" class="form-control" required>
                <option value="">AC Type</option>
                <option value="AC">AC</option>
                <option value="Non-AC">Non-AC</option>
            </select>
        </div>

        <div class="col-md-2">
            <select name="seat_type" class="form-control" required>
                <option value="">Seat Type</option>
                <option value="Sleeper">Sleeper</option>
                <option value="Seater">Seater</option>
            </select>
        </div>

        <div class="col-md-12 mt-3">
            <button type="submit" class="btn btn-success w-100">
                Search Buses
            </button>
        </div>

    </form>

    <!-- ðŸ”¥ Bus Results -->
    {% if buses %}
    <table class="table table-bordered table-striped">
        <thead class="table-dark">
            <tr>
                <th>Bus No</th>
                <th>Operator</th>
                <th>AC</th>
                <th>Seat</th>
                <th>Departure</th>
                <th>Arrival</th>
                <th>Available Seats</th>
                <th>Price (â‚¹)</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for b in buses %}
            <tr>
                <td>{{ b.bus_number }}</td>
                <td>{{ b.operator }}</td>
                <td>{{ b.ac_type }}</td>
                <td>{{ b.seat_type }}</td>
                <td>{{ b.departure_time }}</td>
                <td>{{ b.arrival_time }}</td>
                <td>{{ b.available_seats }}</td>
                <td>{{ b.price }}</td>
                <td>
              <a href="{{ url_for('confirm_bus', bus_id=b.id) }}"
   class="btn btn-primary btn-sm">
   Confirm
</a>


                </td>

            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endif %}

</div>

</body>
</html>
