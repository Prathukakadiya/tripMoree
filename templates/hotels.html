<!DOCTYPE html>
<html>
<head>
    <title>Hotels</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/hotels.css') }}">
</head>
<body>

<h2>Available Hotels</h2>

<div id="hotelContainer" class="hotel-container"></div>

<script>
const container = document.getElementById("hotelContainer");
const destinationId = {{ destination.id }};

fetch(`/api/hotels/${destinationId}`)
.then(res => res.json())
.then(data => {

    if (data.length === 0) {
        container.innerHTML = "<p>No hotels found</p>";
        return;
    }

    data.forEach(hotel => {

        let imagesHTML = "";
        hotel.images.forEach(img => {
            imagesHTML += `<img src="${img}" alt="hotel image">`;
        });

        let amenitiesHTML = hotel.amenities.join(", ");

        container.innerHTML += `
            <div class="hotel-card">
                <div class="hotel-images">
                    ${imagesHTML}
                </div>

                <div class="hotel-info">
                    <h3>${hotel.hotel}</h3>
                    <p>‚≠ê Rating: ${hotel.stars}</p>
                    <p>üí∞ Price: ‚Çπ${hotel.price}</p>
                    <p>üõè Available Rooms: ${hotel.available_rooms}</p>
                    <p>üè® Amenities: ${amenitiesHTML}</p>

                    <!-- üî• FINAL FIX -->
                    <a href="/book-hotel/${hotel.id}">Book Now</a>
                </div>
            </div>
        `;
    });
})
.catch(err => {
    console.error(err);
    container.innerHTML = "<p>Error loading hotels</p>";
});
</script>

</body>
</html>
