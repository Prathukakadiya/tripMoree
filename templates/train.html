{% extends "base.html" %}
{% block title %}Train Search | TripMoreee{% endblock %}

{% block content %}

<style>

.transport-hero{
    background: linear-gradient(rgba(0,0,0,0.75),rgba(0,0,0,0.75)),
    url("https://images.unsplash.com/photo-1548013146-72479768bada") center/cover;
    height:50vh;
    display:flex;
    align-items:center;
    justify-content:center;
    color:white;
    text-align:center;
    animation: fadeIn 1s ease;
}

.transport-hero h1{
    font-size:42px;
}

.search-section{
    padding:80px 20px;
    background:#f8f5ef;
}

.search-box{
    max-width:1100px;
    margin:auto;
    background:white;
    padding:40px;
    border-radius:18px;
    box-shadow:0 20px 40px rgba(0,0,0,0.1);
    animation: slideUp 0.8s ease;
}

.search-grid{
    display:grid;
    grid-template-columns: repeat(auto-fit,minmax(180px,1fr));
    gap:20px;
}

.search-box input,
.search-box select{
    padding:12px;
    border-radius:8px;
    border:1px solid #ddd;
}

.search-btn{
    background:gold;
    border:none;
    padding:12px;
    border-radius:8px;
    font-weight:600;
    cursor:pointer;
    transition:0.3s;
}

.search-btn:hover{
    background:#ffd700;
}

.alert-box{
    margin-top:30px;
    padding:15px;
    background:#ffdddd;
    color:#900;
    border-radius:8px;
    text-align:center;
    animation: fadeIn 1s ease;
}

table{
    width:100%;
    border-collapse:collapse;
    margin-top:40px;
    background:white;
}

th,td{
    padding:12px;
    border-bottom:1px solid #eee;
    text-align:center;
}

th{
    background:black;
    color:white;
}

tr:hover{
    background:#f3f3f3;
}

.confirm-btn{
    background:black;
    color:white;
    padding:6px 14px;
    border-radius:6px;
    text-decoration:none;
    transition:0.3s;
}

.confirm-btn:hover{
    background:gold;
    color:black;
}

@keyframes fadeIn{
    from{opacity:0;}
    to{opacity:1;}
}

@keyframes slideUp{
    from{opacity:0; transform:translateY(40px);}
    to{opacity:1; transform:translateY(0);}
}

</style>

<div class="transport-hero">
    <h1>üöÜ Train Search</h1>
</div>

<div class="search-section">
    <div class="search-box">

        <form method="POST" class="search-grid">
             <select name="source" required>
    <option value="">Select Source</option>
    <option value="Ahmedabad">Ahmedabad</option>
    <option value="Delhi">Delhi</option>
    <option value="Mumbai">Mumbai</option>
    <option value="Rajasthan">Rajasthan</option>
    <option value="Hyderabad">Hyderabad</option>
    <option value="Kolkata">Kolkata</option>
    <option value="Chennai">Chennai</option>
    <option value="Bangalore">Bangalore</option>
    
</select>

            <input type="text" name="destination" value="{{ destination }}" readonly>
            <input type="number" name="persons" value="{{ persons }}" readonly>

            <select name="ac_type" required>
                <option value="">AC Type</option>
                <option value="AC">AC</option>
                <option value="Non-AC">Non-AC</option>
            </select>

            <select name="seat_type" required>
                <option value="">Seat Type</option>
                <option value="Sleeper">Sleeper</option>
                <option value="Seater">Seater</option>
            </select>

            <button class="search-btn">Search Trains</button>
        </form>

        {% if trains %}
        <table>
            <tr>
                <th>Train</th>
                <th>Time</th>
                <th>Type</th>
                <th>Seats</th>
                <th>Price</th>
                <th>Action</th>
            </tr>

            {% for t in trains %}
            <tr>
                <td>{{ t.train_name }}</td>
                <td>{{ t.departure_time }} - {{ t.arrival_time }}</td>
                <td>{{ t.ac_type }} - {{ t.seat_type }}</td>
                <td>{{ t.available_seats }}</td>
                <td>‚Çπ{{ t.price }}</td>
                <td>
                    <a href="{{ url_for('confirm_train', train_id=t.id) }}" class="confirm-btn">
                        Confirm
                    </a>
                </td>
            </tr>
            {% endfor %}
        </table>

        {% elif request.method == "POST" %}
        <div class="alert-box">
            ‚ùå No trains available for selected route.
        </div>
        {% endif %}

    </div>
</div>

{% endblock %}
